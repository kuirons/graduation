<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AddRole</title>

    <!-- ========== Css Files ========== -->
    <link href="css/root.css" rel="stylesheet">
</head>
<body>
<!-- Start Page Header -->
<div class="page-header">
    <h1 class="title">添加角色</h1>
    <ol class="breadcrumb">
        <li><a href="index.html">主页</a></li>
        <li><a href="#">系统管理</a></li>
        <li class="active">添加角色</li>
    </ol>
</div>
<!-- End Page Header -->

<!-- //////////////////////////////////////////////////////////////////////////// -->
<!-- START CONTAINER -->
<!--要在这里添加信息-->
<div class="container-padding">
    <!-- Start Row -->
    <div class="row">
        <!--<div class="panel panel-default">-->
        <div class="panel panel-default">

            <div class="panel-title">
                请输入以下信息:
            </div>

            <div class="panel-body">
                <form id="add-new-roleinfos">
                    <div class="form-group">
                        <label for="new-add-role-name" class="form-label">角色名</label>
                        <input type="text" class="form-control form-control-line" id="new-add-role-name"
                               name="new-add-role-name">
                    </div>
                    <div class="form-group">
                        <label class="form-label">描述</label>
                        <textarea class="form-control form-control-line" rows="1"
                                  id="new-add-role-description" name="new-add-role-description"></textarea>
                    </div>
                    <div class="form-group" id="add-role-permission-infos">
                        <p>权限</p>
                    </div>
                    <button type="button" class="btn btn-default" id="add-roleinfo-save">添加角色</button>
                </form>

            </div>

        </div>
        <!--</div>-->
    </div>
    <!--这是为了留白，不至于太难看-->
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <!-- End Row -->
</div>
<!-- END CONTAINER -->
<!-- //////////////////////////////////////////////////////////////////////////// -->


<!-- Start Footer -->
<div class="row footer">
    <div class="col-md-6 text-right">
        Graduation
    </div>
</div>
<!-- End Footer -->

<!-- ================================================
jQuery Library
================================================ -->
<script type="text/javascript" src="js/jquery.min.js"></script>

<!-- ================================================
Bootstrap Core JavaScript File
================================================ -->
<script src="js/bootstrap/bootstrap.min.js"></script>

<!-- ================================================
Plugin.js - Some Specific JS codes for Plugin Settings
================================================ -->
<script type="text/javascript" src="js/plugins.js"></script>

<!-- ================================================
Bootstrap Select
================================================ -->
<script type="text/javascript" src="js/bootstrap-select/bootstrap-select.js"></script>

<!-- ================================================
Bootstrap Toggle
================================================ -->
<script type="text/javascript" src="js/bootstrap-toggle/bootstrap-toggle.min.js"></script>

<!-- ================================================
Moment.js
================================================ -->
<script type="text/javascript" src="js/moment/moment.min.js"></script>

<!-- ================================================
Bootstrap Date Range Picker
================================================ -->
<script type="text/javascript" src="js/date-range-picker/daterangepicker.js"></script>

<script>
    $(document).ready(function () {
        getAllPermission()
    })

    // 这里请求现有的角色信息
    function getAllPermission() {
        $.ajax({
            type: "post",
            url: "/dataAnalysis/jurisdiction/getAllPermission",
            datatype: "json",
            success: function (data) {
                for (var i = 0; i < data.length; i++) {
                    $("#add-role-permission-infos").append('<div class="checkbox checkbox-primary checkbox-inline">\n' +
                        '    <input id="addPermission' + i + '" type="checkbox" value="' + data[i]["permission"] + '" name="addPermissionInfos[]">\n' +
                        '    <label for="addPermission' + i + '">\n' +
                        '        ' + data[i]["permission"] + '\n' +
                        '    </label>\n' +
                        '</div>')
                }
            }
        })
    }
</script>
<script>
    // 提交信息
    $("#add-roleinfo-save").click(function () {
        $.ajax({
            type: "post",
            data: $("#add-new-roleinfos").serialize(),
            url: "/dataAnalysis/role/addRoleInfos",
            datatype: "json",
            async: false,
            success: function () {
                $("#content").load("/dataAnalysis/static/role-control.html")
            },
            error: function () {
                alert("添加用户失败，请联系管理员")
                $("#content").load("/dataAnalysis/static/role-control.html")
            }
        })
    })
</script>
</body>
</html>
